<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OptimizerTestTool.MainPage"
             Title="Main Page">

    <VerticalStackLayout Padding="16" Spacing="12">
        <!-- Loading message -->
        <Label x:Name="LoadingLabel" Text="" IsVisible="False" />

        <!-- Project List -->
        <Label Text="Select Project" />
        <CollectionView x:Name="ProjectListView"
                SelectionMode="Single"
                SelectionChanged="OnProjectSelected"
                HeightRequest="200">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid ColumnDefinitions="*,Auto" Padding="4">
                        <Label Text="{Binding}" FontSize="16" VerticalOptions="Center" Grid.Column="0"/>
                        <Button Text="Delete"
                        Clicked="OnDeleteProjectClicked"
                        CommandParameter="{Binding}" 
                        BackgroundColor="Red"
                        TextColor="White"
                        Margin="8,0,0,0"
                        VerticalOptions="Center"
                        Grid.Column="1"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Profile File Picker and Status -->
        <HorizontalStackLayout Spacing="8">
            <Button Text="Load Files" Clicked="OnLoadProfileClicked" />
            <Label x:Name="ProfileStatusLabel" Text="Profile: Not loaded" />
            <Image x:Name="ProfileCheckmark" Source="checkmark.png" IsVisible="False" WidthRequest="24" HeightRequest="24"/>
        </HorizontalStackLayout>

        <!-- Status -->
        <Editor x:Name="StatusLabel" IsEnabled="True" IsReadOnly="True" Text="" />

        <!-- Save Project Button -->
        <Button Text="Save Project" Clicked="OnSaveProjectClicked" x:Name="SaveProjectButton" IsEnabled="False" />

    </VerticalStackLayout>
</ContentPage>